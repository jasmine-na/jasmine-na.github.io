<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>李一娜的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#00796b">
  <meta name="msapplication-TileColor" content="#4E8071"/>
  
  
  <link rel="alternative" href="/atom.xml" title="李一娜的博客" type="application/atom+xml">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css"> 
</head>


<body>

  <div id="container" class="container">
    <div class="left-col">
    <div class="intrude-less">
  <header id="header" class="inner">
    <a href="/" class="profilepic">
      <img src="https://jasmine-na.github.io/img/avatar.jpg" class="block-select js-avatar" style="width: 100%;height: 100%;opacity: 1;">
	</a>
	<p class="header-subtitle">技术宅女一枚</p>
    <nav class="header-menu">
      <ul>
        <li><a href="/archives">文章</a></li><li><a href="/tags">标签</a></li><li><a href="/photos">相册</a></li><li><a href="/feedback">留言</a></li><li><a href="/aboutme/">about me</a></li>
      </ul>
    </nav>
  </header>				
</div>
<div class="bottom-logo" style="bottom: 5px;background: url(http://images.missyuan.com/attachments/day_090901/20090901_26d53fd68595b3773beaH7sYHt89zOHT.png)transparent center no-repeat;background-size: 100%;margin: 0 30px;width: 75%;height: 120px;position: absolute;opacity: 0.4;"></div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  <div class="intrude-less">
    <header id="header" class="inner">
      <a href="/" class="profilepic">
        <img src="https://jasmine-na.github.io/img/avatar.jpg" class="block-select js-avatar" style="width: 100%;height: 100%;opacity: 1;">
	  </a>
	  <p class="header-subtitle">技术宅女一枚</p>
	  <nav class="header-menu">
	    <ul>
        <li><a href="/archives">文章</a></li><li><a href="/tags">标签</a></li><li><a href="/photos">相册</a></li><li><a href="/feedback">留言</a></li><li><a href="/aboutme/">about me</a></li><div class="clearfix"></div>
		</ul>
	  </nav>
	</header>				
  </div>
</nav>

      <div class="body-wrap">
  
    
<article id="post-node.js 使用ejs模板引擎时后缀换成.html" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/27/node.js 使用ejs模板引擎时后缀换成.html/">node.js 使用ejs模板引擎时后缀换成.html</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>将</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.<span class="keyword">set</span>(<span class="string">'view engine'</span>, <span class="string">'jade'</span>);</div></pre></td></tr></table></figure>
<p>换成</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//将引擎修改为html</span></div><div class="line"><span class="built_in">var</span> jade = <span class="keyword">require</span>(<span class="string">'jade'</span>);<span class="comment">//在app.js的头上定义jade</span></div><div class="line">app.engine(<span class="string">'html'</span>,jade.__express);<span class="comment">//注册html模板引擎</span></div><div class="line">app.<span class="built_in">set</span>(<span class="string">'view engine'</span>, <span class="string">'html'</span>);<span class="comment">//将模板引擎换成html</span></div></pre></td></tr></table></figure>
<p>修改模板文件的后缀为.html。</p>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-JavaScript常用API总结" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/27/JavaScript常用API总结/">JavaScript常用API总结</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面是我整理的一些JavaScript常用的API清单。</p>
<p>目录</p>
<p>元素查找<br>class操作<br>节点操作<br>属性操作<br>内容操作<br>css操作<br>位置大小<br>事件<br>DOM加载完毕<br>绑定上下文<br>去除空格<br>Ajax<br>JSON处理<br>节点遍历<br>元素查找</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> Node</div><div class="line"><span class="built_in">document</span>.getElementById(id) <span class="regexp">//</span> <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>)</div><div class="line"><span class="built_in">document</span>.querySelector(selectors) <span class="regexp">//</span> <span class="built_in">document</span>.querySelector(<span class="string">'#test div'</span>)</div><div class="line"><span class="built_in">document</span>.doctype</div><div class="line"><span class="built_in">document</span>.documentElement</div><div class="line"><span class="built_in">document</span>.head</div><div class="line"><span class="built_in">document</span>.title</div><div class="line"><span class="built_in">document</span>.body</div><div class="line"> </div><div class="line"><span class="regexp">//</span> NodeList</div><div class="line"><span class="built_in">document</span>.getElementsByClassName(names) <span class="regexp">//</span> <span class="built_in">document</span>.getElementsByClassName(<span class="string">'test'</span>)</div><div class="line"><span class="built_in">document</span>.getElementsByName(name) <span class="regexp">//</span> <span class="built_in">document</span>.getElementsByName(<span class="string">'demo'</span>)</div><div class="line"><span class="built_in">document</span>.getElementsByTagName(name) <span class="regexp">//</span> <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>)</div><div class="line"><span class="built_in">document</span>.getElementsByTagNameNS(namespace, name) <span class="regexp">//</span> <span class="built_in">document</span>.getElementsByTagNameNS(<span class="string">'http://www.w3.org/1999/xhtml'</span>, <span class="string">'div'</span>)</div><div class="line"><span class="built_in">document</span>.querySelectorAll(selectors) <span class="regexp">//</span> <span class="built_in">document</span>.querySelectorAll(<span class="string">'#test div'</span>)</div><div class="line"><span class="built_in">document</span>.links</div><div class="line"><span class="built_in">document</span>.scripts</div><div class="line"><span class="built_in">document</span>.images</div><div class="line"><span class="built_in">document</span>.embeds</div><div class="line"><span class="built_in">document</span>.forms</div></pre></td></tr></table></figure>
<p>class操作</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ie8</span></div><div class="line"><span class="comment">// add class</span></div><div class="line">el.<span class="built_in">className</span> += <span class="string">' '</span> + <span class="built_in">className</span>;</div><div class="line"> </div><div class="line"><span class="comment">// has class</span></div><div class="line">function hasClass(el,<span class="built_in">className</span>)&#123;</div><div class="line">  return new RegExp(<span class="string">'(^| )'</span> + <span class="built_in">className</span> + <span class="string">'( |$)'</span>, <span class="string">'gi'</span>).test(el.<span class="built_in">className</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// toggle class</span></div><div class="line">function toggleClass(el,<span class="built_in">className</span>)&#123;</div><div class="line">  var classes = el.<span class="built_in">className</span>.split(<span class="string">' '</span>);</div><div class="line">  var existingIndex = -<span class="number">1</span>;</div><div class="line">  <span class="keyword">for</span> (var i = classes.length; i--;) &#123;</div><div class="line">    <span class="keyword">if</span> (classes[i] === <span class="built_in">className</span>)&#123;</div><div class="line">      existingIndex = i;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (existingIndex &gt;= <span class="number">0</span>)&#123;</div><div class="line">    classes.splice(existingIndex, <span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span>&#123;</div><div class="line">    classes.push(<span class="built_in">className</span>);</div><div class="line">  &#125;</div><div class="line">  el.<span class="built_in">className</span> = classes.<span class="built_in">join</span>(<span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// remove class</span></div><div class="line">function remove(el,<span class="built_in">className</span>)&#123;</div><div class="line">  el.<span class="built_in">className</span> = el.<span class="built_in">className</span>.replace(new RegExp(<span class="string">'(^|\\b)'</span> + <span class="built_in">className</span>.split(<span class="string">' '</span>).<span class="built_in">join</span>(<span class="string">'|'</span>) + <span class="string">'(\\b|$)'</span>, <span class="string">'gi'</span>), <span class="string">' '</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// ie 10</span></div><div class="line">el.classList.add(<span class="built_in">className</span>); <span class="comment">// add class</span></div><div class="line">el.classList.remove(<span class="built_in">className</span>); <span class="comment">// remove class</span></div><div class="line">el.classList.contains(<span class="built_in">className</span>); <span class="comment">// has class</span></div><div class="line">el.classList.toggle(<span class="built_in">className</span>); <span class="comment">// toggle class</span></div></pre></td></tr></table></figure>
<p>节点操作</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建</span></div><div class="line"><span class="keyword">var</span> el = document.createElement(name);</div><div class="line"> </div><div class="line"><span class="comment">// 复制</span></div><div class="line">el.cloneNode(<span class="keyword">true</span>); <span class="comment">// 默认为false(克隆节点及其后代), true(克隆节点及其属性，以及后代)</span></div><div class="line"> </div><div class="line"><span class="comment">// 向节点添加最后一个子节点</span></div><div class="line"><span class="keyword">parent</span>.appendChild(el);</div><div class="line"> </div><div class="line"><span class="comment">// 在指定子节点之前插入新的子节点</span></div><div class="line"><span class="keyword">parent</span>.insertBefore(el, <span class="keyword">parent</span>.childNodes[<span class="number">0</span>]);</div><div class="line"> </div><div class="line"><span class="comment">// insertAdjacentHTML方法</span></div><div class="line">el.insertAdjacentHTML(where, htmlString);</div><div class="line">el.insertAdjacentHTML(<span class="string">'beforeBegin'</span>, htmlString); <span class="comment">// 在该元素前插入</span></div><div class="line">el.insertAdjacentHTML(<span class="string">'afterBegin'</span>, htmlString); <span class="comment">// 在该元素第一个子元素前插入</span></div><div class="line">el.insertAdjacentHTML(<span class="string">'beforeEnd'</span>, htmlString); <span class="comment">// 在该元素最后一个子元素后面插入</span></div><div class="line">el.insertAdjacentHTML(<span class="string">'afterEnd'</span>, htmlString); <span class="comment">// 在该元素后插入</span></div><div class="line"> </div><div class="line"><span class="comment">// 父元素</span></div><div class="line">el.parentNode</div><div class="line"> </div><div class="line"><span class="comment">// 删除节点</span></div><div class="line">el.parentNode.removeChild(el);</div><div class="line"> </div><div class="line"><span class="comment">// 兄弟节点 ie9+</span></div><div class="line"><span class="keyword">var</span> siblings = <span class="keyword">Array</span>.prototype.filter.call(el.parentNode.children, <span class="function"><span class="keyword">function</span><span class="params">(child)</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> child !== el;</div><div class="line">&#125;)</div><div class="line"> </div><div class="line"><span class="comment">// 下一个兄弟节点</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextElementSibling</span><span class="params">(el)</span> </span>&#123;</div><div class="line">  <span class="keyword">do</span> &#123; el = el.nextSibling; &#125; <span class="keyword">while</span> ( el &amp;&amp; el.nodeType !== <span class="number">1</span> );</div><div class="line">  <span class="keyword">return</span> el;</div><div class="line">&#125;</div><div class="line">nextElementSibling(el);</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.nextElementSibling;</div><div class="line"> </div><div class="line"><span class="comment">// 上一个兄弟节点</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">previousElementSibling</span><span class="params">(el)</span> </span>&#123;</div><div class="line">  <span class="keyword">do</span> &#123; </div><div class="line">    el = el.previousSibling;</div><div class="line">  &#125; </div><div class="line">  <span class="keyword">while</span> ( el &amp;&amp; el.nodeType !== <span class="number">1</span> );</div><div class="line">  <span class="keyword">return</span> el;</div><div class="line">&#125;</div><div class="line">previousElementSibling(el);</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.previousElementSibling;</div><div class="line"> </div><div class="line"><span class="comment">// Children</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line"><span class="keyword">var</span> children = [];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = el.children.length; i--;) &#123;</div><div class="line">  <span class="comment">// Skip comment nodes on IE8</span></div><div class="line">  <span class="keyword">if</span> (el.children[i].nodeType != <span class="number">8</span>)</div><div class="line">    children.unshift(el.children[i]);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.children</div></pre></td></tr></table></figure>
<p>属性操作</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取属性值</span></div><div class="line">el.getAttribute(<span class="string">'alt'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// 设置属性值</span></div><div class="line">el.setAttribute(<span class="string">'alt'</span>, <span class="string">'图片描述'</span>);</div><div class="line">内容操作</div><div class="line"></div><div class="line"><span class="comment">// 获取元素内容</span></div><div class="line">el.innerHTML</div><div class="line"><span class="comment">// 设置元素内容</span></div><div class="line">el.innerHTML = <span class="keyword">string</span></div><div class="line"><span class="comment">// 获取元素内容(包含元素自身)</span></div><div class="line">el.outerHTML</div><div class="line"><span class="comment">// 设置元素内容(包含元素自身)</span></div><div class="line">el.outerHTML = <span class="keyword">string</span></div><div class="line"> </div><div class="line"><span class="comment">// 获取文本内容</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line">el.innerText</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.textContent</div><div class="line"><span class="comment">// 设置文本内容</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line">el.innerText = <span class="keyword">string</span></div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.textContent = <span class="keyword">string</span></div></pre></td></tr></table></figure>
<p>CSS操作</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取css样式</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line">el.currentStyle[attrName]</div><div class="line"><span class="comment">// ie9+</span></div><div class="line"><span class="built_in">window</span>.getComputedStyle(el)[attrName]</div><div class="line"><span class="comment">// 伪类</span></div><div class="line"><span class="built_in">window</span>.getComputedStyle(el , <span class="string">":after"</span>)[attrName];</div><div class="line"> </div><div class="line"><span class="comment">// 设置CSS样式</span></div><div class="line">el.style.display = <span class="string">'none'</span>;</div><div class="line">位置大小</div><div class="line"></div><div class="line"><span class="comment">// getBoundingClientRect返回一个对象，包含top,left,right,bottom,width,height</span></div><div class="line"><span class="comment">// width、height 元素自身宽高</span></div><div class="line"><span class="comment">// top 元素上外边界距窗口最上面的距离</span></div><div class="line"><span class="comment">// right 元素右外边界距窗口最上面的距离</span></div><div class="line"><span class="comment">// bottom 元素下外边界距窗口最上面的距离</span></div><div class="line"><span class="comment">// left 元素左外边界距窗口最上面的距离</span></div><div class="line"><span class="comment">// width 元素自身宽(包含border,padding) </span></div><div class="line"><span class="comment">// height 元素自身高(包含border,padding) </span></div><div class="line"> </div><div class="line"><span class="comment">// 元素在页面上的偏移量</span></div><div class="line"><span class="built_in">var</span> <span class="built_in">rect</span> = el.getBoundingClientRect()</div><div class="line"><span class="keyword">return</span> &#123;</div><div class="line">  <span class="attribute">top</span>: <span class="built_in">rect</span>.top + <span class="built_in">document</span>.body.scrollTop,</div><div class="line">  <span class="attribute">left</span>: <span class="built_in">rect</span>.left + <span class="built_in">document</span>.body.scrollLeft</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// 元素自身宽(包含border,padding) </span></div><div class="line">el.offsetWidth</div><div class="line"><span class="comment">// 元素自身高(包含border,padding) </span></div><div class="line">el.offsetHeight</div><div class="line"><span class="comment">// 元素的左外边框至包含元素的左内边框之间的像素距离</span></div><div class="line">el.offsetLeft</div><div class="line"><span class="comment">// 元素的上外边框至包含元素的上内边框之间的像素距离</span></div><div class="line">el.offsetTop </div><div class="line"> </div><div class="line"><span class="comment">//通常认为 &lt;html&gt; 元素是在 Web 浏览器的视口中滚动的元素（IE6 之前版本运行在混杂模式下时是 &lt;body&gt; 元素） </span></div><div class="line"><span class="comment">//因此，带有垂直滚动条的页面总高度就是 document.documentElement.scrollHeight</span></div><div class="line"><span class="comment">// 在没有滚动条的情况下，元素内容的总高度</span></div><div class="line">scrollHeight</div><div class="line"><span class="comment">// 在没有滚动条的情况下，元素内容的总宽度</span></div><div class="line">scrollWidth</div><div class="line"><span class="comment">// 被隐藏在内容区域左侧的像素数。通过设置这个属性可以改变元素的滚动位置</span></div><div class="line">scrollLeft</div><div class="line"><span class="comment">// 被隐藏在内容区域上方的像素数。通过设置这个属性可以改变元素的滚动位置</span></div><div class="line">scrollTop</div><div class="line"> </div><div class="line"><span class="comment">// 视口大小</span></div><div class="line"><span class="comment">// ie9+</span></div><div class="line"><span class="built_in">var</span> pageWidth = <span class="built_in">window</span>.innerWidth,</div><div class="line">    pageHeight = <span class="built_in">window</span>.innerHeight;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> pageWidth != <span class="string">"number"</span>)&#123; </div><div class="line">  <span class="comment">// ie8</span></div><div class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"CSS1Compat"</span>)&#123;</div><div class="line">    pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</div><div class="line">    pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</div><div class="line">  &#125; <span class="title">else</span> &#123; </div><div class="line">    <span class="comment">// ie6混杂模式</span></div><div class="line">    pageWidth = <span class="built_in">document</span>.body.clientWidth;</div><div class="line">    pageHeight = <span class="built_in">document</span>.body.clientHeight;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 绑定事件</span></div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.addEventListener(eventName, handler , Booleans); <span class="comment">// Booleans默认false(事件在冒泡阶段执行),true(事件在捕获阶段执行)</span></div><div class="line"><span class="comment">// ie8</span></div><div class="line">el.attachEvent(<span class="string">'on'</span> + eventName, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  handler.call(el);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// 移除事件</span></div><div class="line"><span class="comment">// ie9+</span></div><div class="line">el.removeEventListener(eventName, handler); </div><div class="line"><span class="comment">// ie8</span></div><div class="line">el.detachEvent(<span class="string">'on'</span> + eventName, handler);</div><div class="line"> </div><div class="line"><span class="comment">// 事件触发</span></div><div class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.createEvent) &#123;</div><div class="line">  <span class="comment">// ie9+</span></div><div class="line">  <span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">'HTMLEvents'</span>);</div><div class="line">  event.initEvent(<span class="string">'change'</span>, <span class="literal">true</span>, <span class="literal">false</span>);</div><div class="line">  el.dispatchEvent(event);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// ie8</span></div><div class="line">  el.fireEvent(<span class="string">'onchange'</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// event对象</span></div><div class="line"><span class="keyword">var</span> event = <span class="built_in">window</span>.event||event;</div><div class="line"> </div><div class="line"><span class="comment">// 事件的目标节点</span></div><div class="line"><span class="keyword">var</span> target = event.target || event.srcElement;</div><div class="line"> </div><div class="line"><span class="comment">// 事件代理</span></div><div class="line">ul.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (event.target.tagName.toLowerCase() === <span class="string">'li'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(event.target.innerHTML)</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">DOM加载完毕</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ready</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.readyState != <span class="string">'loading'</span>)&#123;</div><div class="line">    <span class="comment">// ie9+</span></div><div class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, fn);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// ie8</span></div><div class="line">    <span class="built_in">document</span>.attachEvent(<span class="string">'onreadystatechange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (<span class="built_in">document</span>.readyState != <span class="string">'loading'</span>)&#123;</div><div class="line">        fn();</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>绑定上下文</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ie8</span></div><div class="line">fn.apply(context, <span class="built_in">arguments</span>);</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">fn.bind(context);</div><div class="line">去除空格</div><div class="line"></div><div class="line"><span class="comment">// ie8</span></div><div class="line">string.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>);</div><div class="line"><span class="comment">// ie9+</span></div><div class="line">string.trim();</div><div class="line">ajax</div><div class="line"></div><div class="line"><span class="comment">// GET</span></div><div class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">request.open(<span class="string">'GET'</span>, <span class="string">'user.php?fname=Bill&amp;lname=Gates'</span>, <span class="literal">true</span>); <span class="comment">// false（同步）</span></div><div class="line">request.send();</div><div class="line"> </div><div class="line"><span class="comment">// ie8</span></div><div class="line">request.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.readyState === <span class="number">4</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status &gt;= <span class="number">200</span> &amp;&amp; <span class="keyword">this</span>.status &lt; <span class="number">400</span>) &#123;</div><div class="line">      <span class="comment">// Success!</span></div><div class="line">      <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(<span class="keyword">this</span>.responseText);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// 错误</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// ie9+</span></div><div class="line">request.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (request.status &gt;= <span class="number">200</span> &amp;&amp; request.status &lt; <span class="number">400</span>) &#123;</div><div class="line">    <span class="comment">// Success!</span></div><div class="line">    <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(request.responseText);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// 服务器返回出错</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">request.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 连接错误</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// POST</span></div><div class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest(); </div><div class="line">request.open(<span class="string">'POST'</span>, <span class="string">'user.php'</span>, <span class="literal">true</span>); <span class="comment">// false（同步）</span></div><div class="line">request.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">request.send(dataString);</div></pre></td></tr></table></figure>
<p>JSON处理</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">string</span>);</div><div class="line"><span class="built_in">JSON</span>.String(<span class="built_in">Object</span>)</div></pre></td></tr></table></figure>
<p>节点遍历</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">forEach</span><span class="params">( nodeList, callback )</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span>(<span class="keyword">Array</span>.prototype.<span class="keyword">forEach</span>)&#123;</div><div class="line">    <span class="comment">// ie9+</span></div><div class="line">    <span class="keyword">Array</span>.prototype.<span class="keyword">forEach</span>.call( nodeList, callback );</div><div class="line">  &#125;<span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// ie8</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodeList.length; i++)&#123;</div><div class="line">      callback(nodeList[i], i);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">forEach</span>(document.querySelectorAll(selector),<span class="function"><span class="keyword">function</span><span class="params">(el, i)</span></span>&#123;</div><div class="line"> </div><div class="line">&#125;)</div></pre></td></tr></table></figure>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-Vue.js实践：一个Node.js+mongoDB+Vue.js的博客内容管理系统" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/27/Vue.js实践：一个Node.js+mongoDB+Vue.js的博客内容管理系统/">Vue.js实践：一个Node.js+mongoDB+Vue.js的博客内容管理系统</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>项目来源</strong><br>以前曾用过WordPress搭建自己的博客网站，但感觉WordPress很是臃肿。所以一直想自己写一个博客内容管理器。</p>
<p>正好近日看完了Vue各个插件的文档，就用着Vue尝试写了这个简约的博客内容管理器（CMS）。</p>
<p><strong>完成的功能</strong></p>
<ul>
<li>一个基本的博客内容管理器功能，如后台登陆，发布并管理文章等 支持markdown语法编辑</li>
<li>支持代码高亮 </li>
<li>可以管理博客页面的链接</li>
<li>博客页面对移动端适配优化 </li>
<li>账户管理(修改密码)</li>
<li>页面足够大气、酷炫~</li>
</ul>
<p>于是，为了彰显一贯的酷炫，我给后台写了一套星空主题。。。</p>
<p><strong>登陆页面</strong></p>
<p><img src="http://img.blog.csdn.net/20161128134443650" alt="这里写图片描述"></p>
<p><strong>后台管理页面</strong></p>
<p><img src="http://img.blog.csdn.net/20161128133623161" alt="这里写图片描述"><br>但博客页面最后没用后台的星空主题，主要是觉得黑色不太好搭配。</p>
<p>于是我想，既然前端都是用Vue.js写的，那就参chao考xi一下Vue.js尤雨溪的博客样式吧！</p>
<p>在这基础上博客页面又加了自己写的canvas动画，应该是足够优雅了~<br><img src="http://img.blog.csdn.net/20161128134724018" alt="这里写图片描述"></p>
<p><a href="http://115.28.90.175:90/#" target="_blank" rel="external">Demo</a></p>
<p>登陆后台按钮在页面最下方“站长登陆”，可以以游客身份登入后台系统。</p>
<p><a href="https://github.com/ycwalker/CMS-of-Blog" target="_blank" rel="external">源码</a></p>
<p><strong>用到的技术和实现思路</strong><br>前端：Vue全家桶</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Vue<span class="selector-class">.js</span></div><div class="line">Vue-Cli</div><div class="line">Vue-Resource</div><div class="line">Vue-Validator</div><div class="line">Vue-Router</div><div class="line">Vuex</div><div class="line">Vue-loader</div></pre></td></tr></table></figure>
<p>后端</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Node</span>.<span class="title">js</span></div><div class="line">mongoDB (mongoose)</div><div class="line">Express</div></pre></td></tr></table></figure>
<p>工具和语言</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Webpack</span></div><div class="line">ES6</div><div class="line">SASS</div><div class="line">Jade</div></pre></td></tr></table></figure>
<p>整体思路</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Node</span><span class="title">服务端除了主页外，不做模板渲染，渲染交给浏览器完成</span></div><div class="line">Node服务端不做任何路由切换的内容，这部分交给Vue-Router完成</div><div class="line"><span class="keyword">Node</span><span class="title">服务端只用来接收请求，查询数据库并用来返回值</span></div></pre></td></tr></table></figure>
<p>所以这样做前后端几乎完全解耦，只要约定好restful风格的数据接口，和数据存取格式就OK啦。</p>
<p>后端我用了mongoDB做数据库，并在Express中通过mongoose操作mongoDB，省去了复杂的命令行，通过Javascript操作无疑方便了很多。</p>
<p>简单的说一下Vue的各个插件：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Vue-<span class="string">Cli:</span>官方的脚手架，用来初始化项目</div><div class="line">Vue-Resource：可以看作一个Ajax库，通过在跟组件引入，可以方便的注入子组件。子组件以<span class="keyword">this</span>.$http调用</div><div class="line">Vue-Validator：用来验证表单</div><div class="line">Vue-Router：官方的路由工具，用来切换子组件，是用来做SPA应用的关键</div><div class="line">Vuex：控制组件中数据的流动，使得数据流动更加清晰，有迹可循。通过官方的vue-devtools可以无缝对接</div><div class="line">Vue-loader：webpack中对Vue文件的加载器</div></pre></td></tr></table></figure>
<p>文件目录<br><img src="http://img.blog.csdn.net/20161128134956412" alt="这里写图片描述"><br>我将前端的文件统一放到了src目录下，其中的mian.js是webpack的入口。</p>
<p>所有页面分割成一个单一的vue组件，放在componentss中，通过入口文件mian.js，由webpack打包生成，生成的文件放在public文件夹下。</p>
<p>后端文件放在server文件夹内，这就是基于Express的node服务器，在server文件夹内执行<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">node</span> <span class="title">www</span></div></pre></td></tr></table></figure></p>
<p>就可以启动Node服务器，默认侦听3000端口。<br><strong>关于Vue-Cli</strong><br>我只是使用了simple的template，相对于默认的template，simple的配置简单得多，但已经有了浏览器自动刷新，生产环境代码压缩等功能。</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vue init simple CMS-<span class="keyword">of</span>-Blog</div></pre></td></tr></table></figure>
<p></p><p>以下是Vue-Cli生成的webpack的配置文件，我只做了一点小改动。</p><p></p>
<p></p><p>话说React.js里就没用像Vue-Cli这样好用的脚手架，还是Vue.js简单优雅。。</p><br><strong>Webpack.config.js</strong><p></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    entry: <span class="string">'./src/main.js'</span>,</div><div class="line">    output: &#123;</div><div class="line">        path: path.resolve(__dirname, <span class="string">'./public'</span>),</div><div class="line">        publicPath: <span class="string">'/public/'</span>,</div><div class="line">        filename: <span class="string">'build.js'</span>,</div><div class="line">    &#125;,</div><div class="line">    resolveLoader: &#123;</div><div class="line">        root: path.join(__dirname, <span class="string">'node_modules'</span>),</div><div class="line">    &#125;,</div><div class="line">    <span class="keyword">module</span>: &#123;</div><div class="line">        loaders: [</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.vue$/</span>,</div><div class="line">                loader: <span class="string">'vue'</span></div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.js$/</span>,</div><div class="line">                loader: <span class="string">'babel'</span>,</div><div class="line">                exclude: <span class="regexp">/node_modules/</span></div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.json$/</span>,</div><div class="line">                loader: <span class="string">'json'</span></div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.html$/</span>,</div><div class="line">                loader: <span class="string">'vue-html'</span></div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.(png|jpg|gif|svg)$/</span>,</div><div class="line">                loader: <span class="string">'url'</span>,</div><div class="line">                query: &#123;</div><div class="line">                    limit: <span class="number">10000</span>,</div><div class="line">                    name: <span class="string">'[name].[ext]?[hash]'</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            , &#123;</div><div class="line">                test: <span class="regexp">/\.(woff|svg|eot|ttf)\??.*$/</span>,</div><div class="line">                loader: <span class="string">'url-loader?limit=50000&amp;name=[path][name].[ext]'</span></div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    babel: &#123;</div><div class="line">        presets: [<span class="string">'es2015'</span>],</div><div class="line">    &#125;,</div><div class="line">    devServer: &#123;</div><div class="line">        historyApiFallback: <span class="literal">true</span>,</div><div class="line">        noInfo: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line">    devtool: <span class="string">'#eval-source-map'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</div><div class="line">    <span class="built_in">module</span>.exports.devtool = <span class="string">'#source-map'</span></div><div class="line">    <span class="comment">// http://vue-loader.vuejs.org/en/workflow/production.html</span></div><div class="line">    <span class="built_in">module</span>.exports.plugins = (<span class="built_in">module</span>.exports.plugins || []).concat([</div><div class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">            <span class="string">'process.env'</span>: &#123;</div><div class="line">                NODE_ENV: <span class="string">'"production"'</span></div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">            output: &#123;</div><div class="line">                comments: <span class="literal">false</span>,</div><div class="line">            &#125;,</div><div class="line">            compress: &#123;</div><div class="line">                warnings: <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.optimize.OccurenceOrderPlugin()</div><div class="line">    ])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看出尤大大帮我们把浏览器自动刷新，热加载和生产环境的代码压缩都写好了，简直超贴心。</p>
<p>然而实际项目中，我还是碰到一个麻烦的问题，下面是package.json中的script脚本</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --inline --hot"</span>,</div><div class="line">    <span class="string">"build"</span>: <span class="string">"cross-env NODE_ENV=production webpack --progress --hide-modules"</span>,</div><div class="line">    <span class="string">"watch"</span>: <span class="string">"webpack --progress --color --watch"</span>,</div><div class="line">    <span class="string">"server"</span>: <span class="string">"supervisor ./server/www"</span></div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<p>运行</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">run</span><span class="bash"> dev</span></div></pre></td></tr></table></figure>
<p>后，浏览器在8080端口开了一个服务器，然而这个服务器是用来服务前端页面的，也就是说，从这里启动服务器而不是开启Node服务器会造成数据无法交互，毕竟这个服务器不能连接数据库。但这个端口是可以在文件修改之后自动刷新浏览器的。</p>
<p>然后，通过分别执行</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">run</span><span class="bash"> watch</span></div><div class="line">npm <span class="keyword">run</span><span class="bash"> server</span></div></pre></td></tr></table></figure>
<p>来侦听文件改动，并重启Node服务器，此时浏览器是不能自动刷新的。找了一些方法但终归没解决。习惯了自动浏览器刷新，碰到这种情况蛮蛋疼的。</p>
<p>于是只好这样：</p>
<p>在修改样式的时候使用8080端口的服务器，在修改数据交互的时候手动刷新在3000端口服务器的浏览器。</p>
<p>虽然不是很方便，但至少通过supervisor不用自己重启Node服务器了。。。</p>
<p><strong>关于Vue-Router</strong><br>因为写的是但也应用（SPA），服务器不负责路由，所以路由方面交给Vue-Router来控制。</p>
<p>下面是根组件，路由控制就在这里，组件挂载在body元素下：</p>
<p><strong>main.js</strong></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter()</div><div class="line"></div><div class="line">router.<span class="keyword">map</span>(&#123;</div><div class="line">    <span class="string">'/'</span>: &#123;</div><div class="line">        componen<span class="variable">t:</span> Archive</div><div class="line">    &#125;,</div><div class="line">    <span class="string">'login'</span>: &#123;</div><div class="line">        componen<span class="variable">t:</span> Login</div><div class="line">    &#125;,</div><div class="line">    <span class="string">'/article'</span>: &#123;</div><div class="line">        componen<span class="variable">t:</span> Article</div><div class="line">    &#125;,</div><div class="line">    <span class="string">'/console'</span>: &#123;</div><div class="line">        componen<span class="variable">t:</span> Console,</div><div class="line">        subRoute<span class="variable">s:</span> &#123;</div><div class="line">            <span class="string">'/'</span>: &#123;</div><div class="line">                componen<span class="variable">t:</span> ArticleList</div><div class="line">            &#125;,</div><div class="line">            <span class="string">'/editor'</span>: &#123;</div><div class="line">                componen<span class="variable">t:</span> Editor</div><div class="line">            &#125;,</div><div class="line">            <span class="string">'/articleList'</span>: &#123;</div><div class="line">                componen<span class="variable">t:</span> ArticleList</div><div class="line">            &#125;,</div><div class="line">            <span class="string">'/menu'</span>: &#123;</div><div class="line">                componen<span class="variable">t:</span> Links</div><div class="line">            &#125;,</div><div class="line">            <span class="string">'account'</span>: &#123;</div><div class="line">                componen<span class="variable">t:</span> Account</div><div class="line">            &#125;,</div><div class="line">        &#125;,</div><div class="line">    &#125;,</div><div class="line">&#125;)</div><div class="line"><span class="keyword">let</span> App = Vue.<span class="built_in">extend</span>(&#123;</div><div class="line">    data()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;&#125;</div><div class="line">    &#125;,</div><div class="line">    component<span class="variable">s:</span> &#123;Waiting,Pop,NightSky,MyCanvas&#125;,</div><div class="line">    http: &#123;</div><div class="line">        roo<span class="variable">t:</span> <span class="string">'/'</span></div><div class="line">    &#125;,</div><div class="line">    computed: &#123;</div><div class="line">        waitin<span class="variable">g:</span> ()=&gt;store.state.waiting,</div><div class="line">        <span class="keyword">pop</span>:()=&gt;store.state.popPara.<span class="keyword">pop</span>,</div><div class="line">        <span class="keyword">b</span><span class="variable">g:</span>()=&gt;store.state.bg,</div><div class="line">    &#125;,</div><div class="line">    store</div><div class="line">&#125;)</div><div class="line"></div><div class="line">router.start(App, <span class="string">'body'</span>)</div></pre></td></tr></table></figure>
<p><strong>对应的文档首页 index.html</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Blog-CMS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">waiting</span> <span class="attr">v-if</span>=<span class="string">"waiting"</span>&gt;</span><span class="tag">&lt;/<span class="name">waiting</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pop</span> <span class="attr">v-show</span>=<span class="string">"pop"</span>&gt;</span><span class="tag">&lt;/<span class="name">pop</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">"bg"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"public/build.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>可以看到路由控制在body元素下的router-view中。之前的waiting，pop和component元素分别是等待效果（就是转圈圈）的弹出层，信息的弹出层，和背景样式的切换。</p>
<p>其实这个index.html是有express通过jade生成的，实际项目中并没有html文件，我是把生成好的html放在这里方便展示。</p>
<p>关于Vue-loader<br>Vue-loader是Vue官方支持webpack的工具，用来将组件写在一个文件里。之前的目录中，有很多分割好的vue文件，每一个文件是一个独立的组件。</p>
<p>比如，这是一个弹出层的组件：</p>
<p><strong>Pop.vue</strong></p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shade"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="template-variable">&#123;&#123;getPopPara.content&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"ok"</span> @<span class="attr">click</span>=<span class="string">"ok"</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"cancel"</span> @<span class="attr">click</span>=<span class="string">"cancel"</span></span></div><div class="line">                        <span class="attr">v-if</span>=<span class="string">"getPopPara.cb2"</span>&gt;取消</div><div class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">import</span> &#123;getPopPara&#125; <span class="keyword">from</span> <span class="string">'../vuex/getters'</span></div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</div><div class="line">        <span class="attr">vuex</span>: &#123;</div><div class="line">            <span class="attr">getters</span>: &#123;</div><div class="line">                getPopPara,</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">methods</span>: &#123;</div><div class="line">            ok()&#123;</div><div class="line">                <span class="keyword">let</span> fn = <span class="keyword">this</span>.getPopPara.cb1</div><div class="line">                <span class="keyword">typeof</span> fn == <span class="string">'function'</span> &amp;&amp; fn()</div><div class="line">            &#125;,</div><div class="line">            cancel()&#123;</div><div class="line">                <span class="keyword">let</span> fn = <span class="keyword">this</span>.getPopPara.cb2</div><div class="line">                <span class="keyword">typeof</span> fn == <span class="string">'function'</span> &amp;&amp; fn()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"sass"</span>&gt;</span><span class="css"></span></div><div class="line">    @<span class="keyword">import</span> <span class="string">"../SCSS/Pop.scss"</span>;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>每一个vue文件都有三个部分（其实是可选的），分别是template，script和style，这也很好理解，就是把html，JS和CSS合并在一起写了嘛。</p>
<p>这个弹窗组件，通过vuex获得其他组件传递过来的参数，参数是一个对象，包括弹出层的展示信息和点击确定或取消时的回调函数。</p>
<p>因为编辑器不支持在vue文件中用sass语法，所以我把sass文件放在外部，通过@import引入。</p>
<p>关于Vue-Resource<br>Vue-Resource可以看成一个与Vue集成的Ajax库，用来创建xhr和获取xhr的response。</p>
<p>因为和Vue高度集成，所以在vue组件中使用很方便。</p>
<p>Article.vue</p>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">my-header</span>&gt;</span><span class="tag">&lt;/<span class="name">my-header</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"article"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"post-block"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span><span class="template-variable">&#123;&#123;title&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-info"</span>&gt;</span><span class="template-variable">&#123;&#123;<span class="name">date</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span></span></div><div class="line">                 <span class="attr">v-html</span>=<span class="string">"content | marked"</span>&gt;</div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">article</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">my-footer</span>&gt;</span><span class="tag">&lt;/<span class="name">my-footer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">import</span> myHeader     <span class="keyword">from</span> <span class="string">'./MyHeader.vue'</span></div><div class="line">    <span class="keyword">import</span> myFooter     <span class="keyword">from</span> <span class="string">'./MyFooter.vue'</span></div><div class="line">    <span class="keyword">import</span> marked       <span class="keyword">from</span> <span class="string">'../js/marked.min.js'</span></div><div class="line">    <span class="keyword">import</span> &#123;bgToggle&#125;   <span class="keyword">from</span> <span class="string">'../vuex/actions'</span></div><div class="line"></div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</div><div class="line">        data()&#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">title</span>: <span class="string">''</span>,</div><div class="line">                <span class="attr">date</span>: <span class="string">''</span>,</div><div class="line">                <span class="attr">content</span>: <span class="string">''</span></div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">filters</span>: &#123;</div><div class="line">            marked</div><div class="line">        &#125;,</div><div class="line">        created()&#123;</div><div class="line">            <span class="keyword">let</span> id = <span class="keyword">this</span>.$route.query.id</div><div class="line">            <span class="keyword">this</span>.$http.get(<span class="string">'/article?id='</span> + id)</div><div class="line">                    .then(<span class="function">(<span class="params">response</span>)=&gt;</span> &#123;</div><div class="line">                        <span class="keyword">let</span> body = <span class="built_in">JSON</span>.parse(response.body)</div><div class="line">                        <span class="keyword">this</span>.content = body.content</div><div class="line">                        <span class="keyword">this</span>.title = body.title</div><div class="line">                        <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(body.date)</div><div class="line">                        <span class="keyword">this</span>.date = d.getFullYear() + <span class="string">'年'</span> +</div><div class="line">                                (d.getMonth() + <span class="number">1</span>) + <span class="string">'月'</span> +</div><div class="line">                                d.getDate() + <span class="string">'日'</span></div><div class="line">                    &#125;, (response)=&gt; &#123;</div><div class="line">                        <span class="built_in">console</span>.log(response)</div><div class="line">                    &#125;)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">components</span>: &#123;</div><div class="line">            myHeader,</div><div class="line">            myFooter</div><div class="line">        &#125;,</div><div class="line">        ready()&#123;</div><div class="line">            <span class="keyword">this</span>.bgToggle(<span class="string">'MyCanvas'</span>)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">vuex</span>:&#123;</div><div class="line">            <span class="attr">actions</span>:&#123;</div><div class="line">                bgToggle</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"sass"</span>&gt;</span><span class="css"></span></div><div class="line">    @<span class="keyword">import</span> <span class="string">"../SCSS/Article.scss"</span>;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Article.vue组件种在created生命周期时创建并发送了一个xhr的get请求，在获取成果后把response对象中的属性在赋值给data中相应的属性，vue会自动更新视图。</p>
<p>博客所支持的markdown语法的关键所在也在这个组件里。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"post-content"</span>&gt;</div><div class="line">       &#123;&#123;&#123;content | marked&#125;&#125;&#125;</div><div class="line">&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure>
<p>通过引入markdown的filter使得输出的html直接被转换成html结构，还是很方便的。</p>
<p><strong>关于后端</strong><br>后端是用node.js作为服务器的，使用了最流行Express框架。</p>
<p>主体是由Express生成，本身十分精简。在实践中修改的地方主要是添加了各种前端发送的get和post请求。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">router.get(<span class="string">'/article'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> id = req.query.id</div><div class="line">    db.Article.findOne(&#123;<span class="attr">_id</span>: id&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, doc</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (err) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (doc) &#123;</div><div class="line">            res.send(doc)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>比如这个请求处理来自前端的get请求，通过mongoose来查询数据库并返回数据。</p>
<p>前端页面通过promise控制异步操作，把得到的数据放入组件的data对象中，Vue侦测变化并更新视图。</p>
<p>数据库的初始化文件放在了init.js中，第一次运行的时候会新建名为admin的用户，初始密码为111，可以在控制台的账号管理中修改。</p>
<p>后记<br>其实还有很多很多没有在这篇文章提及的地方。毕竟这个博客框架相对是比较大的东西。</p>
<p>写过这个博客管理器后，感受还是蛮多的，对Vue.js中的数据绑定，组件化和数据流了解的更深入了一层，同时也对Node.js的后端有了一次优雅的实践。</p>
<p>所以，学过东西之后，实践是非常有必要的。前端很多时候就是不断踩坑的过程。一路踩坑再爬坑，获益匪浅。。。</p>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-怎么在页面里引入bootstrap的css和js文件呢？" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/27/怎么在页面里引入bootstrap的css和js文件呢？/">怎么在页面里引入bootstrap的css和js文件呢？</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>怎么在页面里引入bootstrap的css和js文件呢？<br><img src="http://img.blog.csdn.net/20161128111810694" alt="这里写图片描述"><br>这是一个nodejs+express工程 在npm install之后或使用npm install bootstrap命令安装bootstrap之后，怎么在views/index.ejs文件中引入bootstrap.css文件呢？</p>
<p>在app.js里面引入这句</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.use(<span class="string">"/lib"</span>,express.<span class="keyword">static</span>(path.<span class="keyword">join</span>(__dirname, <span class="string">'node_modules'</span>)));</div></pre></td></tr></table></figure>
<p>制定程序的lib库文件目录<br>然后在ejs里的路径里直接写<code>/lib/bootstrap/dist/js/bootstrap.min.js</code>等，你的node_modules文件夹中的bootstrap包里面的文件就会被映射，因为 这个__dirname 已经是获取当前模块文件所在目录的完整绝对路径。</p>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-web开发时自动刷新网页：liveReload安装，sublime 3" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/28/web开发时自动刷新网页：liveReload安装，sublime 3/">web开发时自动刷新网页：liveReload安装，sublime 3</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>需要插件<br>sublime text3：View in Browser；LiveReload</p>
<p>chrome：liveReload</p>
<p>配置方法</p>
<p><strong>一：sublime text3</strong></p>
<p>sublime 3下载地址：</p>
<p><a href="http://download.csdn.net/download/reggergdsg/9541966" target="_blank" rel="external">http://download.csdn.net/download/reggergdsg/9541966</a></p>
<p><strong>1、在sublime text3安装插件 view in browser</strong></p>
<p>注意（安装插件之前先安装Package Control：<br><a href="http://blog.csdn.net/weixin_36401046/article/details/52880000，" target="_blank" rel="external">http://blog.csdn.net/weixin_36401046/article/details/52880000，</a><br><a href="http://devework.com/sublime-text-3-package-control.html）" target="_blank" rel="external">http://devework.com/sublime-text-3-package-control.html）</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctrl+<span class="built_in">shift</span>+p</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">输入<span class="keyword">install</span> <span class="keyword">package</span>回车</div></pre></td></tr></table></figure>
<p> <img src="http://img.blog.csdn.net/20161021123610219" alt="jojo&#39;s blog"></p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">view</span> <span class="keyword">in</span> browser</div></pre></td></tr></table></figure>
<p><strong>2、安装成功后，修改默认的浏览器：</strong></p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">preferences</span>-&gt;</span><span class="function"><span class="title">package</span> setting-&gt;</span><span class="function"><span class="title">view</span> <span class="built_in">in</span> browser-&gt;</span>setting default</div></pre></td></tr></table></figure>
<p>把firefox改为chrome64</p>
<p><img src="http://img.blog.csdn.net/20161020221608579" alt="jojo&#39;s blog"></p>
<p><strong>3、在sublime text3安装插件liveReload</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctrl+<span class="built_in">shift</span>+p</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">输入<span class="keyword">install</span> <span class="keyword">package</span>回车</div></pre></td></tr></table></figure>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">liveReload</span></div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161021140437368" alt="jojo&#39;s blog"></p>
<p><strong>4、liveReload配置</strong></p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">preferences</span> -&gt;</span> P<span class="function"><span class="title">ackge</span> Settings -&gt;</span> L<span class="function"><span class="title">iveReload</span> -&gt;</span> Settings - Default</div></pre></td></tr></table></figure>
<p> <img src="http://img.blog.csdn.net/20161021103511910" alt="jojo&#39;s blog"></p>
<p>输入以下内容保存即可</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"enabled_plugins"</span>: [</div><div class="line">        <span class="string">"SimpleReloadPlugin"</span>,</div><div class="line">        <span class="string">"SimpleRefresh"</span></div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>二、 chrome浏览器安装liveReload插件</strong></p>
<p><strong>1、</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">方法一：进入chrome插件中心，搜索liveReload，安装即可。</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20161020221630579" alt="jojo&#39;s blog"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">方法二：如果进不到插件中心，下载安装包安装到chrome浏览器：</div></pre></td></tr></table></figure>
<p> <a href="http://download.csdn.net/download/weixin_36401046/9659158" target="_blank" rel="external">http://download.csdn.net/download/weixin_36401046/9659158</a></p>
<p><strong>2、</strong>进入chrome扩展程序页面，将livereload中的允许访问文件网址打上勾 </p>
<p><img src="http://img.blog.csdn.net/20161021103722429" alt="jojo&#39;s blog"></p>
<p><strong>三、测试</strong><br>重新打开sublime text3，重新启动chrome。<br>在sublime text3编辑一个测试html文件，</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>开心<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>自动刷新<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>按 ctr+alt+v 在chrome浏览器中运行，编辑器下方出现livereload提示，并且点击chrome浏览器的livereload图标中间小圆点由虚变实，说明配置成功。</p>
<p><img src="http://img.blog.csdn.net/20161020221647486" alt="jojo&#39;s blog"></p>
<p> <strong>重点内容</strong>：只需要在sublime text3里编辑代码，按 ctr+s 保存，即可在chrome里面看到实时更新。</p>
<p><img src="http://img.blog.csdn.net/20161021110719643" alt="jojo&#39;s blog"></p>
<p><strong>如果没有成功自动刷新，把以下走一遍：</strong></p>
<p>1、找到packages文件夹</p>
<p><img src="http://img.blog.csdn.net/20161021105053386" alt="jojo&#39;s blog"></p>
<p> <img src="http://img.blog.csdn.net/20161021105404410" alt="jojo&#39;s blog"></p>
<p>2、从<a href="https://github.com/Grafikart/ST3-LiveReload" target="_blank" rel="external">https://github.com/Grafikart/ST3-LiveReload</a> 下载压缩包到本地</p>
<p>3、解压， 重命名为LiveReload，拷贝到packages中</p>
<p>参考文献：<a href="http://blog.csdn.net/neet007/article/details/51694643" target="_blank" rel="external">http://blog.csdn.net/neet007/article/details/51694643</a></p>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-hexo主题sausage" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/28/hexo主题sausage/">hexo主题sausage</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <div class="article-entry" itemprop="articleBody"><p><a href="https://github.com/qbeenslee/hexo-theme-sausage" target="_blank" rel="external">sausage</a>是基于<a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="external">Yilia</a>二次开发完成的.</p><h2 id="关于主题">关于主题</h2><p>基于Yilia做的主要工作是删减, 包括:</p><a id="more"></a><ol><li><p>左侧栏删除导航切换和下方的icon链接;</p><blockquote><p>私以为: 这些都可以放到 <code>关于我</code> 页面没必要在每个左侧栏都显示.</p></blockquote></li><li><p>删除一些不必要的修饰元素, 比如文章信息标签前的树叶icon, 日期icon, 包裹文章整体的边框, <code>more</code>链接;</p><blockquote><p>一些不必要的修饰元素会干扰文章的阅读, 在列表页点击文章标题已经可以到达文章正文了就没必要再添加一个<code>more</code>链接.</p></blockquote></li><li><p>删除手机端的顶部固定导航菜单;</p><blockquote><p>一是Yilia本身处理有触摸冲突问题, 二是干扰阅读.</p></blockquote></li></ol><p>当然除了删减外还是做了一点表面工作:</p><ol><li><p>CDN支持, 便于静态资源使用CDN加速, 也对样式修改后更好发版作出了支持(对于想要直接改主题源码的人来说);</p></li><li><p>文章内容是否可选的控制, 只是阻挡一下小白随意拷贝文章内容;</p></li><li><p>单篇文章控制是否开启评论功能, 相类似的控制包括是否标记为原创等, 后面作出具体说明;</p></li><li><p>单独生成标签页面;</p></li></ol><h2 id="使用">使用</h2><h3 id="安装">安装</h3><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/qbeenslee</span><span class="regexp">/hexo-theme-sausage.git themes/sausage</span></span><br></pre></td></tr></tbody></table></figure><h3 id="配置">配置</h3><p>一般情况下Hexo工程目录结构如下:</p><figure class="highlight gherkin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">A</span>|<span class="string"><strong>_</strong>config.yml</span><br><span class="line"></span>|<span class="string">B</span>|<span class="string"><strong><strong>db.json</strong></strong></span><br><span class="line"></span>|<span class="string">C</span>|node_modules</span><br><span class="line">|<span class="string">D</span>|<span class="string"><strong><strong>package.json</strong></strong></span><br><span class="line"></span>|<span class="string">E</span>|public</span><br><span class="line">|<span class="string">F</span>|<strong><strong>scaffolds</strong></strong></span><br><span class="line">|<span class="string">G</span>|<span class="string">    </span>|<span class="string">draft.md</span><br><span class="line"></span>|<span class="string">H</span>|<span class="string">    </span>|<span class="string"><strong><strong>page.md</strong></strong></span><br><span class="line"></span>|<span class="string">I</span>|<span class="string">    </span>|<span class="string">post.md</span><br><span class="line"></span>|<span class="string">J</span>|<strong><strong>source</strong></strong></span><br><span class="line">|<span class="string">K</span>|themes</span><br><span class="line">|<span class="string">L</span>|<span class="string">   </span>|<strong><strong>sausage</strong></strong></span><br><span class="line">|<span class="string">M</span>|<span class="string">        </span>|<span class="string">_config.yml</span><br><span class="line"></span>|<span class="string">N</span>|<span class="string">        </span>|<strong><strong>layout</strong></strong></span><br><span class="line">|<span class="string">O</span>|<span class="string">        </span>|source</span><br></pre></td></tr></tbody></table></figure><p>修改<strong>Hexo根目录下</strong>的 <code>_config.yml</code> (A文件)来应用本主题.</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: sausage</span><br></pre></td></tr></tbody></table></figure><p>修改<strong>主题目录下</strong>的 <code>_config.yml</code> (M文件)来配置本主题, 这里对几个主要的配置做个说明:</p><table><thead><tr><th>Key</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>CDN_PATH</td><td>链接(可选)</td><td>CDN仓库的地址, 比如<a href="http://xxxx.clouddn.com/static/" target="_blank" rel="external">http://xxxx.clouddn.com/static/</a> 下保存了和<code>public</code>(E)目录里生成全部静态资源</td></tr><tr><td>theme_version</td><td>字符串(可选)</td><td>避免CDN缓存造成的样式更新不及时, 现在仅支持style.css文件</td></tr><tr><td>avatar</td><td>链接</td><td>显示在左侧栏上方的环形头像(PC端)</td></tr><tr><td>apple_touch_icon</td><td>链接</td><td>桌面icon</td></tr><tr><td>shortcut_icon</td><td>链接</td><td>标签栏icon</td></tr><tr><td>aboutme</td><td>链接(可选)</td><td>链接到<code>关于我</code>, 在页面最下端个人表示会添加超链接</td></tr><tr><td>copyright</td><td>链接(可选)</td><td>如果文章开启了 <code>original: true</code>会对<code>版权说明</code>做超练级</td></tr><tr><td>duoshuo</td><td>字符串(可选)</td><td>填上多说的short_name</td></tr><tr><td>content_selectable</td><td>true/false</td><td>全局控制内容是否可选</td></tr><tr><td>fold_comments</td><td>true/false</td><td>是否全局折叠评论(不是移除, 可点击<code>查看评论</code>展开评论)</td></tr></tbody></table><p>单篇文章属性配置</p><p>举个例子:</p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">title: 技术博客整理</span><br><span class="line">date: 2015-10-24 01:29:12</span><br><span class="line">updated: 2015-10-24 01:29:12</span><br><span class="line">original: false</span><br><span class="line">top: true</span><br><span class="line">categories: mobile</span><br><span class="line">selectable: true</span><br><span class="line">tags:</span><br><span class="line"> - android</span><br><span class="line"> - 技术博客</span><br><span class="line"> - 整理</span><br></pre></td></tr></tbody></table></figure><p>主要的几个参数说明</p><table><thead><tr><th>key</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>original</td><td>true/false</td><td>是否为原创文章, 为true是会在文章的右下方显示<code>本文为原创，转载请遵守本站版权声明</code></td></tr><tr><td>selectable</td><td>true/false</td><td>文章内容是否可选, 只能防小白…</td></tr><tr><td>noDate</td><td>true/false</td><td>是否显示日期</td></tr></tbody></table><h3 id="简洁的多说评论">简洁的多说评论</h3><p>登录到<a href="duoshuo.com">多说</a>后台, 设置 -&gt; 基本设置 -&gt; 自定义css</p><p>拷贝<a href="https://github.com/qbeenslee/simple-duoshuo" target="_blank" rel="external">simple-duoshuo</a>中的css文件内容, 保存即可.</p><h3 id="生成标签页">生成标签页</h3><p>需要手动生成一个page, <code>hexo new page ‘tag’</code></p><p>编辑markdown文件内容如下:</p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">original: false</span><br><span class="line">comments: false</span><br><span class="line">noDate: true</span><br><span class="line">layout: post</span><br><span class="line"><span class="header">selectable: false</span><br><span class="line">—</span></span><br></pre></td></tr></tbody></table></figure></div>
      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-hexo+github（windows版+ssh版），搭建Hexo博客并部署到Github" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/hexo+github（windows版+ssh版），搭建Hexo博客并部署到Github/">hexo+github（windows版+ssh版），搭建Hexo博客并部署到Github</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ssh优点：http部署时每次要输入github用户名密码，ssh不需要。<br><strong>首先走完http版</strong>：<a href="http://blog.csdn.net/weixin_36401046/article/details/52942683" target="_blank" rel="external">http://blog.csdn.net/weixin_36401046/article/details/52942683</a></p>
<p><strong>设置SSH keys</strong></p>
<p>1、在Git Bash输入以下指令（任意位置点击鼠标右键），检查是否已经存在了SSH keys。<br>ls -al ~/.ssh</p>
<p>2、如果不存在就没有关系，如果存在的话，直接删除.ssh文件夹里面所有文件：<br> <img src="http://img.blog.csdn.net/20161026183423330" alt="jojo&#39;s blog"></p>
<p>3、生成密钥：(与接下来的3二选一即可)</p>
<blockquote>
<p>git config –global user.email “429359876@qq.com”  # 填写你github注册并且验证的邮箱</p>
<p>git config –global user.name “jasmine-na”  # github 用户名</p>
<p>ssh-keygen #  会出现下面的内容，一直按Enter键就行</p>
<p>Generating public/private rsa key pair.<br>Enter file in which to save the key (/home/logan/.ssh/id_rsa):<br>/home/logan/.ssh/id_rsa already exists.<br>Overwrite (y/n)?  #因为我已经生成过了所以提示我，你就一直按就行 </p>
<p>最后在你的.ssh 目录下面生成 id_rsa(私钥) id_rsa.pub(公钥)俩个文件</p>
<p>第二行会提示你在哪个目录下面生成文件。</p>
</blockquote>
<p>3、生成密钥另外一种方法：<br>输入以下指令（邮箱就是你注册Github时候的邮箱）后，回车：</p>
<blockquote>
<p>ssh-keygen -t rsa -C “429359876@qq.com”</p>
</blockquote>
<p> <img src="http://img.blog.csdn.net/20161026183438862" alt="jojo&#39;s blog"></p>
<p>然后它会提示要你输入passphrase，直接回车：</p>
<p> <img src="http://img.blog.csdn.net/20161026183459454" alt="jojo&#39;s blog"></p>
<p>然后键入以下指令：</p>
<blockquote>
<p>ssh-agent -s</p>
</blockquote>
<p> <img src="http://img.blog.csdn.net/20161026183549938" alt="jojo&#39;s blog"></p>
<p>继续输入指令：</p>
<blockquote>
<p>ssh-add ~/.ssh/id_rsa</p>
</blockquote>
<p>输入之后，出错：<br> <img src="http://img.blog.csdn.net/20161026183614204" alt="jojo&#39;s blog"></p>
<p>出错，则输入：</p>
<blockquote>
<p>eval <code>ssh-agent -s</code><br>ssh-add</p>
</blockquote>
<p> <img src="http://img.blog.csdn.net/20161026183638360" alt="jojo&#39;s blog"></p>
<p>4、打开.ssh/id_rsa.pub，全选复制Key<br> <img src="http://img.blog.csdn.net/20161026183841596" alt="jojo&#39;s blog"></p>
<p>5、到Github<br><img src="http://img.blog.csdn.net/20161027110146361" alt="jojo&#39;s blog"></p>
<p><img src="http://img.blog.csdn.net/20161027110158205" alt="jojo&#39;s blog"></p>
<p><img src="http://img.blog.csdn.net/20161027110206799" alt="jojo&#39;s blog"></p>
<p>6、测试：</p>
<blockquote>
<p>ssh -T git@github.com</p>
</blockquote>
<p> <img src="http://img.blog.csdn.net/20161026183947385" alt="jojo&#39;s blog"></p>
<p>遇到警告输入“yes”，<br>最后输出 You’ve successfully authenticated 表示添加key 成功。</p>
<p><strong>编辑_config.yml文件</strong></p>
<p>修改文件里面的deploy，</p>
<p>修改后</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">deploy</span>:</div><div class="line">  <span class="attribute">type</span>: git</div><div class="line">  <span class="attribute">repo</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:jasmine-na/jasmine-na.github.io.git</div><div class="line">  <span class="attribute">branch</span>: master</div></pre></td></tr></table></figure>
<p><strong>完成部署</strong><br>1、    依次键入指令：</p>
<blockquote>
<p>hexo clean</p>
<p>hexo generate</p>
<p>hexo deploy</p>
</blockquote>
<p>2、在浏览器输入：<a href="http://jasmine-na.github.io/" target="_blank" rel="external">http://jasmine-na.github.io/</a></p>
<p> <img src="http://img.blog.csdn.net/20161027101348580" alt="jojo&#39;s blog"></p>
<p><strong>更多文章：</strong><br><a href="http://blog.csdn.net/weixin_36401046/article/details/52942683" target="_blank" rel="external">hexo+github（windows版+http版），搭建Hexo博客并部署到Github</a></p>

      
      
      
    </div>
    
  </div>
  
</article>





  
    
<article id="post-hexo+github（windows版+http版），搭建Hexo博客并部署到Github" class="article article-type-post" itemscope itemprop="blogPost">

   
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/hexo+github（windows版+http版），搭建Hexo博客并部署到Github/">hexo+github（windows版+http版），搭建Hexo博客并部署到Github</a>
    </h1>
  

        
      </header>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://img.blog.csdn.net/20161026182636997" alt="jojo&#39;s blog"></p>
<p><strong>工具/原料</strong><br>•    Windows（Mac也是差不多，可参照）<br>•    Git<br>•    Node.js</p>
<p><strong>安装Hexo</strong></p>
<p>1、利用 npm 命令即可安装。在任意位置点击鼠标右键，选择Git Bash。</p>
<p> <img src="http://img.blog.csdn.net/20161026182730919" alt="jojo&#39;s blog"></p>
<p>2、输入命令：</p>
<blockquote>
<p>npm install -g hexo</p>
<p>注意：-g是指全局安装hexo。</p>
</blockquote>
<p><strong>创建Hexo文件夹</strong></p>
<p>1、新建文件夹 Hexo<br>2、</p>
<blockquote>
<p>cd Hexo</p>
<p>hexo init   //Hexo 即会自动在目标文件夹建立网站所需要的所有文件。</p>
<p>npm install   //安装依赖包</p>
</blockquote>
<p><strong>本地查看</strong><br>•    现在我们已经搭建起本地的hexo博客了，执行以下命令(在Hexo文件夹下)，然后到浏览器输入localhost:4000看看。</p>
<blockquote>
<p>hexo generate</p>
<p>hexo server</p>
</blockquote>
<p> <img src="http://img.blog.csdn.net/20161026183033027" alt="jojo&#39;s blog"></p>
<p><strong>注册Github账号</strong><br>•    这里不演示了。</p>
<p><strong>创建Repository仓库</strong></p>
<p>登录github后，</p>
<p><img src="http://img.blog.csdn.net/20161027093752469" alt="jojo&#39;s blog"></p>
<p><img src="http://img.blog.csdn.net/20161027093814641" alt="jojo&#39;s blog"></p>
<p><img src="http://img.blog.csdn.net/20161027093832188" alt="jojo&#39;s blog"></p>
<p>•    注意：创建的时候注意Repository的名字。比如我的Github账号是jasmine-na，那么我应该创建的Repository的名字是：<strong>jasmine-na.github.io</strong>。<br>(必须是Github账号名.github.io)</p>
<p><img src="http://img.blog.csdn.net/20161027093143442" alt="jojo&#39;s blog"></p>
<p><strong>修改配置文件</strong><br>1、到你刚刚创建的Repository下，找到以下内容：</p>
<p> <img src="http://img.blog.csdn.net/20161026183141935" alt="jojo&#39;s blog"></p>
<p>2、先点击HTTPS，然后复制里面的地址。然后编辑_config.yml文件（在C:\Hexo下）。<br> <img src="http://img.blog.csdn.net/20161026183201545" alt="jojo&#39;s blog"></p>
<p>3、修改文件里面的deploy。其中的repository就改成你刚刚复制的地址。保存这个文件。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">deploy</span>:</div><div class="line">  <span class="attribute">type</span>: git</div><div class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//github.com/jasmine-na/jasmine-na.github.io.git</span></div><div class="line">  <span class="attribute">branch</span>: master</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161027094431301" alt="jojo&#39;s blog"></p>
<p>（注意格式）</p>
<p><strong>完成部署</strong></p>
<p>1、下载hexo-deployer-git</p>
<blockquote>
<p>npm install hexo-deployer-git –save</p>
</blockquote>
<p>2、最后一步，Git Bash下，依次键入以下指令：<br>（注意：每次修改本地文件后，都需要依次键入以下指令）</p>
<blockquote>
<p>hexo clean    //清除缓存文件 db.json 和已生成的静态文件 public </p>
<p>hexo generate //生成网站静态文件到默认设置的 public 文件夹</p>
<p>hexo deploy //自动生成网站静态文件，并部署到设定的仓库。</p>
</blockquote>
<p>hexo deploy过程中会提示你输入账号名和密码，Username是你的Github账号名称，而不是邮箱；Password就是你的Github的密码。</p>
<p> <img src="http://img.blog.csdn.net/20161026184053081" alt="jojo&#39;s blog"></p>
<p>2、OK，我们的博客就已经完全搭建起来了，在浏览器输入（当然，是你的用户名）：<br><a href="http://jasmine-na.github.io/" target="_blank" rel="external">http://jasmine-na.github.io/</a></p>
<p><img src="http://img.blog.csdn.net/20161027101348580" alt="jojo&#39;s blog"></p>
<p><strong>Tips</strong><br>•    hexo现在支持更加简单的命令格式了，比如：</p>
<blockquote>
<p>hexo g == hexo generate</p>
<p>hexo d == hexo deploy</p>
<p>hexo s == hexo server</p>
<p>hexo n == hexo new</p>
</blockquote>
<p><strong>更多文章：</strong><br><a href="http://blog.csdn.net/weixin_36401046/article/details/52937108" target="_blank" rel="external">hexo+github（windows版+ssh版），搭建Hexo博客并部署到Github</a></p>

      
      
      
    </div>
    
  </div>
  
</article>





  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
    </nav>
  

</div>
      <footer id="footer" class="block-select">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">&copy; 2015-2016
        <a href="/aboutme/" class ="aboutme-foot-tag"> liyina</a>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script>
	var ThemeXConfig = {fancybox: false,mathjax: false,animate: false,isHome: true,isPost: false,isArchive: false,isTag: false,isCategory: false,open_in_new: false, CDN_PATH: '' }
</script>


    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/base.js"></script>
    <script src="/js/jquery.lazyload.min.js"></script>





  </div>
</body>
</html>
